<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Sun Sep 17 2023 21:02:51 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="64f973a4e5a13d680bd6c565" data-wf-site="64e6f2c7fa3692d90d1b7012">
<head>
  <meta charset="utf-8">
  <title>Bets</title>
  <meta content="Bets" property="og:title">
  <meta content="Bets" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="assets/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="assets/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="assets/css/swer3.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Poppins:100italic,200,300,regular,500,600,700,800","Nunito:200,300,regular,500,600,700,800,900"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="assets/images/SWER3_FAVI.png" rel="shortcut icon" type="image/x-icon">
    <link href="assets/images/SWER3_FAVI.png" rel="apple-touch-icon">
  <style>
    .swer3-logo{
      position: absolute;
      top: 16px;
      right: 0;
      left: 30%;
      width: 65px;
      height: 65px;
      margin: auto;
    }
    .logo-3dimg{
      width: 125px;
      margin-top: 50px;
    }
    .bets-masthead {
      height: auto;
      min-height: 225px;
      background-image: linear-gradient(120deg, #e439a7, #ab2fc4 98%);
      padding-top: 1rem;
      position: relative;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div class="page-wrapper mobile">
    <div class="page-main full">
      <div class="bets-masthead">
        <div class="mob-container">
          <div class="logo-3d-wrapper">
            <img src="assets/images/SWER3-HD_2.svg" loading="eager" alt="" class="swer3-logo">
            <img src="assets/images/3D-LOGO-1.svg" loading="eager" alt="" class="logo-3dimg">
          </div>
        </div>
        <img src="assets/images/sent05_10-Converted-01-1.svg" loading="eager" alt="" class="bets-balls-bg">
      </div>

      <div class="mob-bets-content mb-1">
        <div class="bets-card draw-container shadow">
          <div class="bets-wrap">
            <div class="bets-draw-time">
              <div class="text-style-1">Next</div>
              <div id="draw_description" class="draw-time-text">TBA</div>
            </div>
            <div class="evening-icon-wrapper">
              <img id="draw_img" src="" loading="lazy" alt="">
            </div>
          </div>
          
          <div style="padding: .25rem;"></div>

          <div class="gray-line"></div>

          <div style="padding: .25rem;"></div>
          
          <div class="draw-cutoff-time">
            <div class="draw-time-block">
              <div class="text-12px medium">Draw time</div>
              <div class="draw-time-text-green"><span id="draw_time">TBA</span> ET</div>
            </div>
            <div class="draw-time-block">
              <div class="text-12px medium">Cut-off</div>
              <div id="draw_cut_off" class="draw-time-text-green">TBA</div>
            </div>
          </div>
          <div id="draw_date" class="date-text-style">TBA</div>
        </div>
      </div>

      <div class="mob-current-bets">
        <div class="mob-bets-container">
          <div class="text-style-2 mb-1">My Current Bets</div>
        </div>
      </div>
      <div class="bets-play mb-1">
        <div id="playerBets" class="player-bets-scroll">

          <div class="players-bets-card not-yet">
            <img src="assets/images/3D-TICKET-2.svg" loading="lazy" alt="">
          </div>
          <div style="padding: .5rem;"></div>
          <div class="players-bets-card not-yet">
            <img src="assets/images/3D-TICKET-2.svg" loading="lazy" alt="">
          </div>
          <div style="padding: .5rem;"></div>
          <div class="players-bets-card not-yet">
            <img src="assets/images/3D-TICKET-2.svg" loading="lazy" alt="">
          </div>
          <div style="padding: .5rem;"></div>
          <div class="players-bets-card not-yet">
            <img src="assets/images/3D-TICKET-2.svg" loading="lazy" alt="">
          </div>
          <div style="padding: .5rem;"></div>
          <div class="players-bets-card not-yet">
            <img src="assets/images/3D-TICKET-2.svg" loading="lazy" alt="">
          </div>
          
        </div>
      </div>

      <div class="mob-current-bets">
        <div class="mob-bets-container">
          <a id="place_bet" class="btn-primary place-bet w-button">Place bet</a>
        </div>
      </div>

      <div class="p-4"></div>
      <div class="mobile-navbar">
        <a href="./player-home.html" class="mobile-nav-link w-inline-block"><img src="assets/images/Group_1.svg" loading="lazy" alt="">
          <div class="text-12px bold">Home</div>
        </a>
        <a href="./player-bets.html" class="mobile-nav-link bet w-inline-block"><img src="assets/images/Vector-1_1.svg" loading="lazy" alt="">
          <div class="text-12px bold">Bets</div>
        </a>
        <a href="./player-live.html" class="mobile-nav-link w-inline-block">
          <img src="assets/images/live-nav.svg" loading="lazy" alt="" class="live-nav">
          <div class="text-12px ">Live Draw</div>
        </a>
        <a href="./player-history.html" class="mobile-nav-link w-inline-block"><img src="assets/images/Group-1.svg" loading="lazy" alt="">
          <div class="text-12px bold">History</div>
        </a>
        <a href="#" id="accountNav" class="mobile-nav-link w-inline-block"><img src="assets/images/layer1.svg" loading="lazy" alt="">
          <div class="text-12px bold">Account</div>
        </a>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=64e6f2c7fa3692d90d1b7012" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="assets/js/webflow.js" type="text/javascript"></script>
  <script src="assets/js/local_routes.js" type="text/javascript"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script>
    
    $(document).ready(function() {
      // check auth
      var userEmail = localStorage.getItem('user_email');
      var userRole = localStorage.getItem('user_role');

      if (userEmail === null || userRole === null) {
        location.href='player-login.html';
        localStorage.clear();
      }

      // role check
      if(userRole === 'Player') {
        $('#accountNav').attr('href', 'player-account.html');
      }else $('#accountNav').attr('href', 'coordinator-account.html');



      // converter func      
      function convertTime24to12(time24) {
        // Split the time string into hours, minutes, and seconds
        var timeParts = time24.split(':');
        var hours = parseInt(timeParts[0]);
        var minutes = parseInt(timeParts[1]);

        // Determine the period (AM or PM)
        var period = hours >= 12 ? 'pm' : 'am';

        // Convert hours to 12-hour format
        if (hours > 12) {
            hours -= 12;
        } else if (hours === 0) {
            hours = 12;
        }

        // Format the time as "hh:mm am/pm"
        var time12 = hours.toString().padStart(2, '0') + ':' + minutes.toString().padStart(2, '0') + ' ' + period;

        return time12;
      }
      function formatDate(inputDate) {
        var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        
        // Split the input date into year, month, and day
        var dateParts = inputDate.split('-');
        var year = dateParts[0];
        var month = parseInt(dateParts[1]) - 1; // Subtract 1 as months are zero-based
        var day = dateParts[2];
        
        // Format the date as "Month day, Year"
        var formattedDate = months[month] + ' ' + day + ', ' + year;
        
        return formattedDate;
      }
      // end of converter func





      var btnActive = false;
      // incoming draw
      var xhr = new XMLHttpRequest();
      xhr.open("POST", PLAYER_API.FETCH_INCOMING_DRAW_PLAYER);
      xhr.onload = function(){
        var result = JSON.parse(this.response)
        // console.log(result)
        if(result.length != 0){
          var betImg = {
            '01:00 pm': 'sun_4814268-1-1.png',
            '05:00 pm': 'Group-3.png',
            '06:00 pm': 'Group-3.png',
            '09:00 pm': 'Layer_x0020_1.svg',
            '11:00 pm': 'Layer_x0020_1.svg',
          }
          $('#draw_description').html(convertTime24to12(result.draw_time).toUpperCase() + ' Draw');
          $('#draw_time').html(convertTime24to12(result.draw_time));
          $('#draw_cut_off').html(convertTime24to12(result.cut_off_time));
          $('#draw_date').html(formatDate(result.draw_date));
          $('#draw_img').prop('src','assets/images/' + betImg[convertTime24to12(result.draw_time)]);

          

          // bets
          var dataForm = new FormData();
          dataForm.append("drawId", result.draw_id);
          dataForm.append("userEmail", userEmail);
          var xhr = new XMLHttpRequest();
          xhr.open("POST", PLAYER_API.FETCH_BETS_PLAYER);
          xhr.onload = function(){
            var result = JSON.parse(this.response)
            console.log(result);
            var ctr = 5;
            if(result.length != 0){
              $('#playerBets').html('')
              for(var i = 0 ; i < result.length ; i++){
                $('#playerBets').append(`
                  <div class="players-bets-card">
                    <div class="bets-number"><img src="assets/images/Mask-group.svg" loading="lazy" alt="" class="mr-0-5">
                      <div class="bet-digits">`+result[i].bet_number+`</div>
                    </div>
                    <div class="type-amount">
                      <div class="bet-type">`
                        + ((result[i].is_straight == '1')? 'Straight' : '') + ((result[i].is_box_play == '1')? 'Box' : '') +
                        ` Play</div>
                      <div class="bet-amount">$`+result[i].bet_amount+`</div>
                    </div>
                  </div>
                `);
                ctr--;
                
                // if(i < (result.length-1)) {
                  $('#playerBets').append(`
                    <div style="padding: .5rem;"></div>
                  `);                  
                // }
              }

              for(var i = 0 ; i < ctr ; i++){
                $('#playerBets').append(`
                  <div class="players-bets-card not-yet">
                    <img src="assets/images/3D-TICKET-2.svg" loading="lazy" alt="">
                  </div>
                `);                
                if(i != ctr - 1) {
                  $('#playerBets').append(`
                    <div style="padding: .5rem;"></div>
                  `);                  
                }
              }
              btnActive = true;
              return;
            }
            btnActive = true;
            return;
          }
          xhr.send(dataForm); 
          // end of bets



        }
      }
      xhr.send(); 
      // end of incoming draw



      // place bet
      $('#place_bet').click(function(){
        if(btnActive){
          var xhr = new XMLHttpRequest();
          xhr.open("POST", PLAYER_API.FETCH_PLACE_BET_PLAYER);
          xhr.onload = function(){
            var result = JSON.parse(this.response)
            console.log(result)
            if(result.message == 'allow'){
              location.href="player-bets-2.html";
            }else if(result.message == 'not allowed'){
              swal("Betting is Now Closed", "You can't place your bets now, it's already past the cut off time" , "info");
            }else{
              swal(result.message, "Please wait for incoming draw" , "info");
            }
          }
          xhr.send(); 
        }
      });
      // end of place bet
    })
  </script>
</body>
</html>